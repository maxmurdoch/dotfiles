import angular from 'angular';
import _ from 'lodash';
import {moment} from 'app/services/moment/moment';

export const dateFormatFilterModule = angular.module('dateFormatFilterModule', [
]).filter('dateFormat', [
  function dateFormat() {
    let encodeFormat = {
      human: 'Do MMM YYYY',
      short: 'DD.MM.YY',
      input: 'DD/MM/YYYY',
      timestamp: 'DD.MM.YY HH:mm:ss',
    };

    return (date, format) => {
      if (!date || !_.isString(date) || !moment(date).isValid()) {
        return date;
      }

      if (format in encodeFormat) {
        return moment(date).format(encodeFormat[format]);
      } else {
        return moment(date).format(format);
      }
    };
  },
]);
